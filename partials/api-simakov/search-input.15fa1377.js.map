{"mappings":"AAGA,MAAMA,EAAOC,SAASC,eAAe,eAC/BC,EAAc,ICJpB,MAOEC,UAAUC,GACR,OAAOJ,SAASK,cAAcD,E,CAEhCE,SACEC,KAAKC,OAAOC,UAAW,EACvBF,KAAKC,OAAOE,YAAc,W,CAG5BC,UACEJ,KAAKC,OAAOC,UAAW,EACvBF,KAAKC,OAAOE,YAAc,c,CAG5BE,OACEL,KAAKC,OAAOK,UAAUC,IAAI,S,CAE5BC,OACER,KAAKC,OAAOK,UAAUG,OAAO,S,CAvB/BC,aAAYb,SAAEA,EAAQc,SAAEA,GAAW,IACjCX,KAAKC,OAASD,KAAKJ,UAAUC,GAE7Bc,GAAYX,KAAKK,M,GDAe,CAClCR,SAAU,cACVc,UAAU,IAENC,EAAU,IELhB,MAMEC,UACE,MAAMC,EAAM,uCAAiBd,KAAKe,+BAA+Bf,KAAKgB,YAKtE,OAAOC,MAAMH,EAJG,CACdI,QAAS,CAAE,YAXD,sCAeTC,MAAKC,GAAYA,EAASC,SAC1BF,MAAKG,IACJtB,KAAKuB,gBACED,I,CAIbE,YACExB,KAAKgB,UAAY,C,CAGnBO,gBACEvB,KAAKgB,WAAa,C,CAxBpBN,cACEV,KAAKgB,UAAY,EACjBhB,KAAKe,YAAc,E,GFkBvB,SAASU,IAEP,OADA9B,EAAYS,UACLQ,EACJC,UACAM,MAAK,EAACO,SAAEA,MACP,GAAwB,IAApBA,EAASC,QAAwC,KAAxBf,EAAQG,YACnC,MAAM,IAAIa,MAAM,WAElB,OAAOF,EAASG,QACd,CAACC,EAAQC,IAWjB,UAAsBC,OAAEA,EAAMC,MAAEA,EAAKC,YAAEA,EAAWpB,IAAEA,EAAGqB,WAAEA,IACvD,MAAO,iFAGEA,GACA,kJAE6BF,iDACAD,GAAU,uDACZE,GAAe,sHAELpB,iG,CAtBnBsB,CAAaL,GAAWD,GAC7C,GACD,IAEFX,MAAKW,IACJO,EAAeP,GACfnC,EAAYI,QAAQ,IAErBuC,MAAMC,E,CAmBX,SAASF,EAAeP,GACtBrC,SACGC,eAAe,mBACf8C,mBAAmB,YAAaV,E,CAOrC,SAASS,EAAQE,GACfC,QAAQD,MAAMA,GACdJ,EAAe,sD,CA9DjB7C,EAAKmD,iBAAiB,UAGtB,SAAkBC,GAChBA,EAAEC,iBAEFjC,EAAQG,YAAc6B,EAAEE,cAAcC,SAASC,KAAKC,MAAMC,OAmD1DzD,SAASC,eAAe,mBAAmByD,UAAY,GAjDvDvC,EAAQY,YACR7B,EAAYa,OAEZiB,IAAY2B,SAAQ,IAAM5D,EAAK6D,S,IAVjC1D,EAAYM,OAAO0C,iBAAiB,QAASlB","sources":["src/js/api-simakov/search-input.js","src/js/api-simakov/components/loadMoreBtn.js","src/js/api-simakov/api.js"],"sourcesContent":["import { NewsApi } from './api';\nimport { LoadMoreBtn } from './components/loadMoreBtn';\n\nconst form = document.getElementById('form-search');\nconst lodeMoreBtn = new LoadMoreBtn({\n  selector: '#lodMoreBtn',\n  isHidden: true,\n});\nconst newsApi = new NewsApi();\n\nform.addEventListener('submit', onSubmit);\nlodeMoreBtn.button.addEventListener('click', fetchNews);\n\nfunction onSubmit(e) {\n  e.preventDefault();\n\n  newsApi.searchQuery = e.currentTarget.elements.news.value.trim();\n  clearNewList();\n  newsApi.resetPage();\n  lodeMoreBtn.show();\n\n  fetchNews().finally(() => form.reset());\n}\n\nfunction fetchNews() {\n  lodeMoreBtn.disable();\n  return newsApi\n    .getNews()\n    .then(({ articles }) => {\n      if (articles.length === 0 || newsApi.searchQuery === '') {\n        throw new Error('No data');\n      }\n      return articles.reduce(\n        (markup, article) => createMarkup(article) + markup,\n        ''\n      );\n    })\n    .then(markup => {\n      updateNewsList(markup);\n      lodeMoreBtn.enable();\n    })\n    .catch(onError);\n}\n\nfunction createMarkup({ author, title, description, url, urlToImage }) {\n  return `\n        <div class=\"articles-card\">\n         <img class=\"article-img\" src=\"${\n           urlToImage ||\n           'https://t3.ftcdn.net/jpg/02/48/42/64/360_F_248426448_NVKLywWqArG2ADUxDq6QprtIzsF82dMF.jpg'\n         }\" alt=\"#\" />\n            <h2 class=\"article-title\">${title}</h2>\n            <h3 class=\"article-author\"${author || 'Anonym'}></h3>\n            <p class=\"article-text\">${description || 'Fack You!!!'}</p>\n            <div class=\"article-link-conteiner\">\n                <a class=\"article-link\" href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\">Reade more</a>\n            </div>\n        </div>`;\n}\n\nfunction updateNewsList(markup) {\n  document\n    .getElementById('articlesWrapper')\n    .insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearNewList() {\n  document.getElementById('articlesWrapper').innerHTML = '';\n}\n\nfunction onError(error) {\n  console.error(error);\n  updateNewsList('<p class =\"article-error\">Articles not found!!!</p>');\n}\n","class LoadMoreBtn {\n  constructor({ selector, isHidden = false }) {\n    this.button = this.getButton(selector);\n\n    isHidden && this.hide();\n  }\n\n  getButton(selector) {\n    return document.querySelector(selector);\n  }\n  enable() {\n    this.button.disabled = false;\n    this.button.textContent = 'Load More';\n  }\n\n  disable() {\n    this.button.disabled = true;\n    this.button.textContent = 'Loading.....';\n  }\n\n  hide() {\n    this.button.classList.add('hidden');\n  }\n  show() {\n    this.button.classList.remove('hidden');\n  }\n}\n\nexport { LoadMoreBtn };\n","const ENDPOINT = 'https://newsapi.org/v2/everything';\nconst API_KEY = 'd8847f02a17a4f339957c5e8d851cb8e';\n\nclass NewsApi {\n  constructor() {\n    this.queryPage = 1;\n    this.searchQuery = '';\n  }\n\n  getNews() {\n    const url = `${ENDPOINT}?q=${this.searchQuery}&pageSize=8&page=${this.queryPage}`;\n    const options = {\n      headers: { 'X-Api-Key': API_KEY },\n    };\n\n    return fetch(url, options)\n      .then(responce => responce.json())\n      .then(data => {\n        this.incrementPage();\n        return data;\n      });\n  }\n\n  resetPage() {\n    this.queryPage = 1;\n  }\n\n  incrementPage() {\n    this.queryPage += 1;\n  }\n}\n\nexport { NewsApi };\n"],"names":["$89fbd391a1daca88$var$form","document","getElementById","$89fbd391a1daca88$var$lodeMoreBtn","getButton","selector","querySelector","enable","this","button","disabled","textContent","disable","hide","classList","add","show","remove","constructor","isHidden","$89fbd391a1daca88$var$newsApi","getNews","url","searchQuery","queryPage","fetch","headers","then","responce","json","data","incrementPage","resetPage","$89fbd391a1daca88$var$fetchNews","articles","length","Error","reduce","markup","article","author","title","description","urlToImage","$89fbd391a1daca88$var$createMarkup","$89fbd391a1daca88$var$updateNewsList","catch","$89fbd391a1daca88$var$onError","insertAdjacentHTML","error","console","addEventListener","e","preventDefault","currentTarget","elements","news","value","trim","innerHTML","finally","reset"],"version":3,"file":"search-input.15fa1377.js.map"}